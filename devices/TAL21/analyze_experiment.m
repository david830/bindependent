% auto generated by Experiment.py

stem824 = '../../../2012-08-24_new_dna_conc/TAL21/';
stem1031 = '../../../2012-10-31-Triplicate_full_set/TAL21/';
stem1110 = '../../../2012-11-10-Last_set/TAL21/';

experimentName = 'CascadeTriplicate';
device_name = 'TAL21';
inducer_name = 'Dox';
load('../../controls/CMtriplicate.mat');
input = channel_named(CM, 'Blue');
output = channel_named(CM, 'Yellow');
constitutive = channel_named(CM, 'Red');
% Try without 8/24 data
level_file_pairs = ...
 {0.0,    {[stem1031 'TAL21-1_C7_C07_P3.fcs']}; % Failed data point: 10/31 'TAL21-2_B4_B04_P3.fcs'
  0.1,    {[stem1031 'TAL21-1_C8_C08_P3.fcs']}; % Failed data point 10/31 'TAL21-2_B5_B05_P3.fcs'
  0.2,    {[stem1031 'TAL21-1_C9_C09_P3.fcs'],  [stem1031 'TAL21-2_B6_B06_P3.fcs']};
  0.5,    {[stem1031 'TAL21-1_C10_C10_P3.fcs'], [stem1031 'TAL21-2_B7_B07_P3.fcs']};
  1.0,    {[stem1031 'TAL21-1_C11_C11_P3.fcs'], [stem1031 'TAL21-2_B8_B08_P3.fcs']};
  2.0,    {[stem1031 'TAL21-1_C12_C12_P3.fcs']}; % Failed data point: 10/31 'TAL21-2_B9_B09_P3.fcs'
  5.0,    {[stem1031 'TAL21-1_D1_D01_P3.fcs'],  [stem1031 'TAL21-2_B10_B10_P3.fcs']};
  10.0,   {[stem1031 'TAL21-1_D2_D02_P3.fcs'],  [stem1031 'TAL21-2_B11_B11_P3.fcs']};
  20.0,   {[stem1031 'TAL21-1_D3_D03_P3.fcs'],  [stem1031 'TAL21-2_B12_B12_P3.fcs']};
  50.0,   {[stem1031 'TAL21-1_D4_D04_P3.fcs'],  [stem1031 'TAL21-2_C1_C01_P3.fcs']};
  100.0,  {[stem1031 'TAL21-1_D5_D05_P3.fcs'],  [stem1031 'TAL21-2_C2_C02_P3.fcs']};
  200.0,  {[stem1031 'TAL21-1_D6_D06_P3.fcs'],  [stem1031 'TAL21-2_C3_C03_P3.fcs']};
  500.0,  {[stem1031 'TAL21-1_D7_D07_P3.fcs'],  [stem1031 'TAL21-2_C4_C04_P3.fcs']};
  1000.0, {[stem1031 'TAL21-1_D8_D08_P3.fcs']}; % Failed data point: 10/31 'TAL21-2_C5_C05_P3.fcs'
  2000.0, {[stem1031 'TAL21-1_D9_D09_P3.fcs']}}; % Failed data point: 10/31 'TAL21-2_C6_C06_P3.fcs'
% level_file_pairs = ...
%  {0.0,    {[stem824 'TAL21_C7_C07_P3.fcs'],  [stem1031 'TAL21-1_C7_C07_P3.fcs']}; % Failed data point: 10/31 'TAL21-2_B4_B04_P3.fcs'
%   0.1,    {[stem824 'TAL21_C8_C08_P3.fcs'],  [stem1031 'TAL21-1_C8_C08_P3.fcs']}; % Failed data point 10/31 'TAL21-2_B5_B05_P3.fcs'
%   0.2,    {[stem824 'TAL21_C9_C09_P3.fcs'],  [stem1031 'TAL21-1_C9_C09_P3.fcs'],  [stem1031 'TAL21-2_B6_B06_P3.fcs']};
%   0.5,    {[stem824 'TAL21_C10_C10_P3.fcs'],  [stem1031 'TAL21-1_C10_C10_P3.fcs'], [stem1031 'TAL21-2_B7_B07_P3.fcs']};
%   1.0,    {[stem824 'TAL21_C11_C11_P3.fcs'],  [stem1031 'TAL21-1_C11_C11_P3.fcs'], [stem1031 'TAL21-2_B8_B08_P3.fcs']};
%   2.0,    {[stem824 'TAL21_C12_C12_P3.fcs'],  [stem1031 'TAL21-1_C12_C12_P3.fcs']}; % Failed data point: 10/31 'TAL21-2_B9_B09_P3.fcs'
%   5.0,    {[stem824 'TAL21_D1_D01_P3.fcs'],  [stem1031 'TAL21-1_D1_D01_P3.fcs'],  [stem1031 'TAL21-2_B10_B10_P3.fcs']};
%   10.0,   {[stem824 'TAL21_D2_D02_P3.fcs'],  [stem1031 'TAL21-1_D2_D02_P3.fcs'],  [stem1031 'TAL21-2_B11_B11_P3.fcs']};
%   20.0,   {[stem824 'TAL21_D3_D03_P3.fcs'],  [stem1031 'TAL21-1_D3_D03_P3.fcs'],  [stem1031 'TAL21-2_B12_B12_P3.fcs']};
%   50.0,   {[stem824 'TAL21_D4_D04_P3.fcs'],  [stem1031 'TAL21-1_D4_D04_P3.fcs'],  [stem1031 'TAL21-2_C1_C01_P3.fcs']};
%   100.0,  {[stem824 'TAL21_D5_D05_P3.fcs'],  [stem1031 'TAL21-1_D5_D05_P3.fcs'],  [stem1031 'TAL21-2_C2_C02_P3.fcs']};
%   200.0,  {[stem824 'TAL21_D6_D06_P3.fcs'],  [stem1031 'TAL21-1_D6_D06_P3.fcs'],  [stem1031 'TAL21-2_C3_C03_P3.fcs']};
%   500.0,  {[stem824 'TAL21_D7_D07_P3.fcs'],  [stem1031 'TAL21-1_D7_D07_P3.fcs'],  [stem1031 'TAL21-2_C4_C04_P3.fcs']};
%   1000.0, {[stem824 'TAL21_D8_D08_P3.fcs'],  [stem1031 'TAL21-1_D8_D08_P3.fcs']}; % Failed data point: 10/31 'TAL21-2_C5_C05_P3.fcs'
%   2000.0, {[stem824 'TAL21_D9_D09_P3.fcs'],  [stem1031 'TAL21-1_D9_D09_P3.fcs']}}; % Failed data point: 10/31 'TAL21-2_C6_C06_P3.fcs'
experiment = Experiment(experimentName,{inducer_name}, level_file_pairs);
fprintf('Starting analysis...\n');
bins = BinSequence(4,0.1,10,'log_bins');
AP = AnalysisParameters(bins,{'input',input; 'output',output; 'constitutive' constitutive});
AP=setMEFLPerPlasmid(AP,1000');
AP=setMinValidCount(AP,100');
AP=setPemDropThreshold(AP,5');
AP=setUseAutoFluorescence(AP,false');
sampleresults = process_data(CM,experiment,AP);
results = summarize_data(CM,experiment,AP,sampleresults);
OS = OutputSettings('Fine',device_name,'');
plot_bin_statistics(sampleresults,OS);
plot_IO_characterization(results,OS);
OSind = OutputSettings('Fine',inducer_name,'');
plot_inducer_characterization(results,OSind);
save('-V7','TAL21-Fine.mat','CM','experiment','AP','sampleresults','results');
